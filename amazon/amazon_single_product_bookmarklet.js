// Amazon Single Product Extractor Bookmarklet

javascript:(function(){console.log('=== AMAZON SINGLE PRODUCT EXTRACTOR ===');const e={};const n=['#productTitle','.a-size-large.product-title-word-break','h1.a-size-large','[data-cy="title-recipe"]','.product-title-word-break'];for(const t of n){const n=document.querySelector(t);if(n&&n.textContent.trim()){e.name=n.textContent.trim();console.log('‚úÖ Found product name:',e.name);break}}e.link=window.location.href;console.log('‚úÖ Product URL:',e.link);const t=['#bylineInfo','.a-link-normal.contributorNameID','#brand','.a-size-base.a-color-secondary','[data-cy="byline-info"]'];for(const n of t){const t=document.querySelector(n);if(t&&t.textContent.trim()){e.description=t.textContent.trim();console.log('‚úÖ Found description/byline:',e.description);break}}const o=['#landingImage','#imgBlkFront','.a-dynamic-image','[data-image-index="0"]','.image img'];for(const n of o){const t=document.querySelector(n);if(t){let n=t.src||t.getAttribute('data-old-hires')||t.getAttribute('data-image');if(n&&!n.includes('placeholder')&&!n.includes('spinner')&&!n.includes('loading')&&n.startsWith('http')){if(n.includes('_SS135_'))n=n.replace('_SS135_','_SS300_');if(n.includes('._SL'))n=n.replace(/\._SL\d+_/, '._SL500_');e.imageUrl=n;console.log('‚úÖ Found image URL:',e.imageUrl);break}}}if(!e.imageUrl){const n=document.querySelectorAll('img');for(const t of n){const n=t.src;if(n&&n.includes('media-amazon.com')&&!n.includes('placeholder')&&!n.includes('spinner')&&!n.includes('loading')&&n.includes('images/I/')){e.imageUrl=n;console.log('‚úÖ Found image URL (fallback):',e.imageUrl);break}}}console.log('=== EXTRACTED PRODUCT DATA ===');console.log(JSON.stringify(e,null,2));try{const n=JSON.stringify([e],null,2);const t=new Blob([n],{type:'application/json'});const o=URL.createObjectURL(t);const c=document.createElement('a');c.href=o;c.download='amazon_single_product_'+new Date().toISOString().slice(0,10)+'.json';c.style.display='none';document.body.appendChild(c);c.click();document.body.removeChild(c);URL.revokeObjectURL(o);console.log('‚úÖ Amazon single product data exported successfully!');console.log(`üìÅ File: amazon_single_product_${new Date().toISOString().slice(0,10)}.json`)}catch(n){console.error('‚ùå Error creating download:',n)}return[e]})();
